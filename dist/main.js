(()=>{"use strict";var t={434:(t,e,n)=>{n.d(e,{Z:()=>s});var r=n(81),a=n.n(r),o=n(645),i=n.n(o)()(a());i.push([t.id,"html, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed, \nfigure, figcaption, footer, header, hgroup, \nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure, \nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\nbody {\n\tline-height: 1;\n}\nol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}",""]);const s=i},890:(t,e,n)=>{n.d(e,{Z:()=>s});var r=n(81),a=n.n(r),o=n(645),i=n.n(o)()(a());i.push([t.id,":root {\n  --cell-size: 50px;\n}\n\nh1{\n  width: fit-content;\n  margin: auto;\n  font-size: 48pt;\n}\n\n#gameboard-container {\n  display: flex;\n  width: fit-content;\n  margin: auto;\n}\n\n.board-frame {\n  margin: 50px;\n  width: fit-content;\n  display: grid;\n  grid-template-columns: repeat(10, 1fr);\n}\n\n.board-grid {\n  width: var(--cell-size);\n  height: var(--cell-size);\n  border: solid grey 1px;\n}\n\n#ships-container {\n  margin: auto;\n  width: 300px;\n  height: 500px;\n  display: flex;\n  border: solid black 1px;\n}\n\n.draggable-ship {\n  position: relative;\n  top: -1px;\n  left: -1px;\n}\n\n.draggable-ship-part {\n  width: var(--cell-size);\n  height: var(--cell-size);\n  border: solid rgb(0, 191, 255) 1px;\n  background-color: rgb(166, 233, 255);\n}\n\n.ship {\n  background-color: rgb(200, 200, 200);\n  border-color: black;\n}\n\n.hit {\n  background-color: rgb(255, 145, 145);\n  border-color: red;\n}\n\n.miss {\n  background-color: rgb(145, 145, 255);\n  border-color: blue;\n}\n\n.self-hit {\n  background-color: rgb(180, 128, 128);\n  border-color: rgb(230, 128, 128);\n}\n\n.self-miss {\n  background-color: rgb(128, 128, 180);\n  border-color: rgb(128, 128, 230);\n}\n\n#blocking-screen {\n  position: absolute;\n  width: 100vw;\n  height: 100vh;\n  top: 0;\n  left: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n#game-over-sign {\n  width: 300px;\n  height: 300px;\n  color: white;\n  background-color: black;\n  text-align: center;\n}\n",""]);const s=i},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,a,o){"string"==typeof t&&(t=[[null,t,void 0]]);var i={};if(r)for(var s=0;s<this.length;s++){var d=this[s][0];null!=d&&(i[d]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);r&&i[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),a&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=a):l[4]="".concat(a)),e.push(l))}},e}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var o={},i=[],s=0;s<t.length;s++){var d=t[s],c=r.base?d[0]+r.base:d[0],l=o[c]||0,u="".concat(c," ").concat(l);o[c]=l+1;var p=n(u),h={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==p)e[p].references++,e[p].updater(h);else{var f=a(h,r);r.byIndex=s,e.splice(s,0,{identifier:u,updater:f,references:1})}i.push(u)}return i}function a(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,a){var o=r(t=t||[],a=a||{});return function(t){t=t||[];for(var i=0;i<o.length;i++){var s=n(o[i]);e[s].references--}for(var d=r(t,a),c=0;c<o.length;c++){var l=n(o[c]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}o=d}}},569:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var o=e[r]={id:r,exports:{}};return t[r](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t=n(379),e=n.n(t),r=n(795),a=n.n(r),o=n(569),i=n.n(o),s=n(565),d=n.n(s),c=n(216),l=n.n(c),u=n(589),p=n.n(u),h=n(434),f={};f.styleTagTransform=p(),f.setAttributes=d(),f.insert=i().bind(null,"head"),f.domAPI=a(),f.insertStyleElement=l(),e()(h.Z,f),h.Z&&h.Z.locals&&h.Z.locals;var m=n(890),g={};g.styleTagTransform=p(),g.setAttributes=d(),g.insert=i().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=l(),e()(m.Z,g),m.Z&&m.Z.locals&&m.Z.locals;class v{constructor(t){this.size=t,this.damage=[],this.damage.length=t,this.damage.fill(!1)}hit(t){this.damage[t]=!0}isSunk(){return!!this.damage.every((function(t){return t}))}}const b=function(t=null){let e=[];for(let n=0;n<10;n++){e.push([]);for(let r=0;r<10;r++)e[n].push(t)}return e},y=function(t,e,n,r,a){if("horizontal"===a){if(e>10-n)throw"Ship overflows the gameboard.";for(let a=0;a<e;a++)if("water"!==t[n+a][r])throw"Ship overlaps with other ship."}else if("vertical"===a){if(e>10-r)throw"Ship overflows the gameboard.";for(let a=0;a<e;a++)if("water"!==t[n][r+a])throw"Ship overlaps with other ship."}};class w{constructor(){this.layout=b("water"),this.record=b(),this.ships=[]}placeShip(t,e,n,r){try{y(this.layout,r,t,e,n)}catch(t){return t}this.ships.push(new v(r));const a=this.ships.length-1;if("horizontal"===n)for(let o=0;o<r;o++)this.layout[t+o][e]={id:a,orientation:n,part:o};else if("vertical"===n)for(let o=0;o<r;o++)this.layout[t][e+o]={id:a,orientation:n,part:o}}moveShip(t,e,n,r){const a=this.layout[t][e].id,o=this.layout[t][e].orientation,i=this.ships[a].size,s=function(t){let e=JSON.stringify(t);return e=JSON.parse(e),e}(this.layout);if("horizontal"===o)for(let n=0;n<i;n++)s[t+n][e]="water";else if("vertical"===o)for(let n=0;n<i;n++)s[t][e+n]="water";try{y(s,i,n,r,o)}catch(t){return t}if("horizontal"===o)for(let n=0;n<i;n++)this.layout[t+n][e]="water";else if("vertical"===o)for(let n=0;n<i;n++)this.layout[t][e+n]="water";if("horizontal"===o)for(let t=0;t<i;t++)this.layout[n+t][r]={id:a,orientation:o,part:t};else if("vertical"===o)for(let t=0;t<i;t++)this.layout[n][r+t]={id:a,orientation:o,part:t}}receiveAttack(t,e){try{!function(t,e,n){if("hit"===n.record[t][e]||"miss"===n.record[t][e])throw"Repeated attack."}(t,e,this)}catch(t){return t}const n=this.layout[t][e];"water"===n?this.record[t][e]="miss":(this.ships[n.id].hit(n.part),this.record[t][e]="hit")}areAllShipsSunk(){return this.ships.every((function(t){return t.isSunk()}))}}class S{constructor(){this.gameboard=new w}attack(t){let e=Math.round(9*Math.random()),n=Math.round(9*Math.random());for(;"Repeated attack."===t.gameboard.receiveAttack(e,n);)e=Math.round(9*Math.random()),n=Math.round(9*Math.random())}}const x=(()=>{const t=new S,e=new S;return{player1:t,computer1:e,placeShips:function(e){e.forEach((function(e){t.gameboard.placeShip(parseInt(e.x),parseInt(e.y),e.orientation,parseInt(e.size))}))},start:function(){e.gameboard.placeShip(0,0,"vertical",4)},doPcTurn:function(){e.attack(t)},doPlayerTurn:function(t,n){return"Repeated attack."!==e.gameboard.receiveAttack(t,n)},checkStatus:function(){return t.gameboard.areAllShipsSunk()?"pc wins":e.gameboard.areAllShipsSunk()?"player wins":void 0}}})(),k={playButton:document.querySelector("#play-button")},E=function(){const t=document.querySelector("main");for(;t.firstChild;)t.removeChild(t.lastChild)},L=(()=>{const t=document.createElement("button");return t.id="one-player-button",t.textContent="ONE PLAYER",{onePlayerButton:t,load:function(){E(),document.querySelector("main").appendChild(t)}}})(),C=function(t){const e=t.dataTransfer;e.dataEffect="move",e.setData("text/plain",t.target.id);const n=t.target.parentElement;n.className.includes("board-grid")&&(e.setData("isPlaced","true"),e.setData("xo",n.dataset.x),e.setData("yo",n.dataset.y))},z=function(t){t.preventDefault(),t.dataTransfer.dataEffect="move"},T=function(t,e){t.preventDefault();let n=t.target;if(n.className.includes("draggable-ship-part")){const e=n.parentElement;e.hidden=!0,n=document.elementFromPoint(t.clientX,t.clientY),e.hidden=!1}const r=t.dataTransfer,a=r.getData("text/plain"),o=document.querySelector(`#${a}`),i=parseInt(n.dataset.x),s=parseInt(n.dataset.y);if(r.getData("isPlaced")){const t=parseInt(r.getData("xo")),a=parseInt(r.getData("yo")),d=e.moveShip(t,a,i,s);"Ship overflows the gameboard."!==d&&"Ship overlaps with other ship."!==d&&n.appendChild(o)}else{const t=e.placeShip(i,s,o.dataset.orientation,o.dataset.size);"Ship overflows the gameboard."!==t&&"Ship overlaps with other ship."!==t&&n.appendChild(o)}},M=(()=>{const t=new w,e=(()=>{const e=document.createElement("div");e.classList.add("board-frame");const n=[];for(let t=0;t<10;t++){n.push([]);for(let e=0;e<10;e++)n[t].push(document.createElement("div")),n[t][e].classList.add("board-grid"),n[t][e].dataset.x=t,n[t][e].dataset.y=e}for(let r=0;r<10;r++)for(let a=0;a<10;a++)e.appendChild(n[a][r]),n[a][r].addEventListener("dragover",z),n[a][r].addEventListener("drop",(function(e){T(e,t)}));return{frame:e,grid:n}})(),n=function(t){const e=document.createElement("div");e.setAttribute("draggable","true"),e.classList.add("draggable-ship"),e.dataset.size=t,e.dataset.orientation="vertical";for(let n=0;n<t;n++){const t=document.createElement("div");t.classList.add("draggable-ship-part"),t.dataset.part=n,e.appendChild(t)}return e.addEventListener("dragstart",C),e},r=document.createElement("button");r.textContent="READY";const a=document.createElement("div");a.id="gameboard-container";const o=document.createElement("div");return o.id="ships-container",a.append(o,e.frame),{load:function(){E();const t=n(4);t.id="carrier";const e=n(3);e.id="battleship",o.append(t,e),document.querySelector("main").append(a,r)},addReadyHandler:function(t){r.addEventListener("click",(function(){t(),r.remove()}))},getShips:function(){const t=[];for(let n=0;n<10;n++)for(let r=0;r<10;r++){const a=e.grid[n][r],o=a.firstChild;a.hasChildNodes()&&t.push({x:a.dataset.x,y:a.dataset.y,orientation:o.dataset.orientation,size:o.dataset.size})}return t}}})(),q=(()=>{const t=function(){const t=document.createElement("div");t.classList.add("board-frame");const e=[];for(let t=0;t<10;t++){e.push([]);for(let n=0;n<10;n++)e[t].push(document.createElement("div")),e[t][n].classList.add("board-grid"),e[t][n].dataset.x=t,e[t][n].dataset.y=n}for(let n=0;n<10;n++)for(let r=0;r<10;r++)t.appendChild(e[r][n]);return{frame:t,grid:e}},e=t(),n=t();return{load:function(){E();const t=document.createElement("div");t.id="gameboard-container",t.append(e.frame,n.frame),document.querySelector("main").appendChild(t)},addReadyHandler:function(t){readyButton.addEventListener("click",(function(){t(),readyButton.remove()}))},updateLayout:function(t){for(let n=0;n<10;n++)for(let r=0;r<10;r++){const a=t[n][r],o=e.grid[n][r];"hit"===a?o.classList.add("self-hit"):"miss"===a?o.classList.add("self-miss"):"water"!==a&&null!==a&&o.classList.add("ship")}},updateRecord:function(t){for(let e=0;e<10;e++)for(let r=0;r<10;r++){const a=t[e][r],o=n.grid[e][r];"hit"===a?o.classList.add("hit"):"miss"===a&&o.classList.add("miss")}},addRecordHandler:function(t){n.grid.forEach((e=>{e.forEach((e=>{e.addEventListener("click",(function(e){const n=e.target.dataset.x,r=e.target.dataset.y;t(n,r)}))}))}))},loadGameOverScreen:function(t){const e=document.createElement("div");e.id="blocking-screen";const n=document.createElement("div");n.id="game-over-sign",n.textContent=`GAME OVER: ${t} wins!`,e.appendChild(n),document.querySelector("main").appendChild(e)}}})();k.playButton.addEventListener("click",L.load),L.onePlayerButton.addEventListener("click",(function(){M.load(),M.addReadyHandler((function(){const t=M.getShips();x.placeShips(t),q.load(),x.start(),q.updateLayout(x.player1.gameboard.layout),q.addRecordHandler((function(t,e){x.doPlayerTurn(t,e)&&(q.updateRecord(x.computer1.gameboard.record),"player wins"===x.checkStatus()?q.loadGameOverScreen("player"):(x.doPcTurn(),q.updateLayout(x.player1.gameboard.record),"pc wins"===x.checkStatus()&&q.loadGameOverScreen("pc")))}))}))}))})()})();