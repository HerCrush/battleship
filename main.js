(()=>{"use strict";var t={434:(t,e,n)=>{n.d(e,{Z:()=>s});var a=n(81),r=n.n(a),o=n(645),i=n.n(o)()(r());i.push([t.id,"html, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed, \nfigure, figcaption, footer, header, hgroup, \nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure, \nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\nbody {\n\tline-height: 1;\n}\nol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}",""]);const s=i},890:(t,e,n)=>{n.d(e,{Z:()=>s});var a=n(81),r=n.n(a),o=n(645),i=n.n(o)()(r());i.push([t.id,':root {\n  --cell-size: 50px;\n}\n\nh1{\n  width: fit-content;\n  margin: auto;\n  font-size: 48pt;\n}\n\n#gameboard-container {\n  display: flex;\n  width: fit-content;\n  margin: auto;\n}\n\n.board-frame {\n  margin: 50px;\n  width: fit-content;\n  display: grid;\n  grid-template-columns: repeat(10, 1fr);\n}\n\n.board-grid {\n  width: var(--cell-size);\n  height: var(--cell-size);\n  border: solid grey 1px;\n}\n\n#ships-container {\n  margin: auto;\n  width: 300px;\n  height: 500px;\n  display: flex;\n  border: solid black 1px;\n}\n\n.draggable-ship {\n  position: relative;\n  top: -1px;\n  left: -1px;\n  display: flex;\n}\n\n.draggable-ship[data-orientation="vertical"] {\n  flex-direction: column;\n}\n\n.draggable-ship[data-orientation="horizontal"] {\n  flex-direction: row;\n  width: fit-content;\n}\n\n.draggable-ship-part {\n  width: var(--cell-size);\n  height: var(--cell-size);\n  border: solid rgb(0, 191, 255) 1px;\n  background-color: rgb(166, 233, 255);\n}\n\n.ship {\n  background-color: rgb(200, 200, 200);\n  border-color: black;\n}\n\n.hit {\n  background-color: rgb(255, 145, 145);\n  border-color: red;\n}\n\n.miss {\n  background-color: rgb(145, 145, 255);\n  border-color: blue;\n}\n\n.self-hit {\n  background-color: rgb(180, 128, 128);\n  border-color: rgb(230, 128, 128);\n}\n\n.self-miss {\n  background-color: rgb(128, 128, 180);\n  border-color: rgb(128, 128, 230);\n}\n\n#blocking-screen {\n  position: absolute;\n  width: 100vw;\n  height: 100vh;\n  top: 0;\n  left: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n#game-over-sign {\n  width: 300px;\n  height: 300px;\n  color: white;\n  background-color: black;\n  text-align: center;\n}\n',""]);const s=i},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",a=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),a&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),a&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,a,r,o){"string"==typeof t&&(t=[[null,t,void 0]]);var i={};if(a)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(i[l]=!0)}for(var c=0;c<t.length;c++){var d=[].concat(t[c]);a&&i[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),e.push(d))}},e}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function n(t){for(var n=-1,a=0;a<e.length;a++)if(e[a].identifier===t){n=a;break}return n}function a(t,a){for(var o={},i=[],s=0;s<t.length;s++){var l=t[s],c=a.base?l[0]+a.base:l[0],d=o[c]||0,u="".concat(c," ").concat(d);o[c]=d+1;var p=n(u),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)e[p].references++,e[p].updater(h);else{var f=r(h,a);a.byIndex=s,e.splice(s,0,{identifier:u,updater:f,references:1})}i.push(u)}return i}function r(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var o=a(t=t||[],r=r||{});return function(t){t=t||[];for(var i=0;i<o.length;i++){var s=n(o[i]);e[s].references--}for(var l=a(t,r),c=0;c<o.length;c++){var d=n(o[c]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}o=l}}},569:t=>{var e={};t.exports=function(t,n){var a=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,r&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(a,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(a){var r=e[a];if(void 0!==r)return r.exports;var o=e[a]={id:a,exports:{}};return t[a](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t=n(379),e=n.n(t),a=n(795),r=n.n(a),o=n(569),i=n.n(o),s=n(565),l=n.n(s),c=n(216),d=n.n(c),u=n(589),p=n.n(u),h=n(434),f={};f.styleTagTransform=p(),f.setAttributes=l(),f.insert=i().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=d(),e()(h.Z,f),h.Z&&h.Z.locals&&h.Z.locals;var m=n(890),g={};g.styleTagTransform=p(),g.setAttributes=l(),g.insert=i().bind(null,"head"),g.domAPI=r(),g.insertStyleElement=d(),e()(m.Z,g),m.Z&&m.Z.locals&&m.Z.locals;class v{constructor(t){this.size=t,this.damage=[],this.damage.length=t,this.damage.fill(!1)}hit(t){this.damage[t]=!0}isSunk(){return!!this.damage.every((function(t){return t}))}}const y=function(t=null){let e=[];for(let n=0;n<10;n++){e.push([]);for(let a=0;a<10;a++)e[n].push(t)}return e},b=function(t){let e=JSON.stringify(t);return e=JSON.parse(e),e},S=function(t,e,n,a,r){if("horizontal"===r){if(e>10-n)throw"Ship overflows the gameboard.";for(let r=0;r<e;r++)if("water"!==t[n+r][a])throw"Ship overlaps with other ship."}else if("vertical"===r){if(e>10-a)throw"Ship overflows the gameboard.";for(let r=0;r<e;r++)if("water"!==t[n][a+r])throw"Ship overlaps with other ship."}};class w{constructor(){this.layout=y("water"),this.record=y(),this.ships=[]}placeShip(t,e,n,a){try{S(this.layout,a,t,e,n)}catch(t){return t}this.ships.push(new v(a));const r=this.ships.length-1;if("horizontal"===n)for(let o=0;o<a;o++)this.layout[t+o][e]={id:r,orientation:n,part:o};else if("vertical"===n)for(let o=0;o<a;o++)this.layout[t][e+o]={id:r,orientation:n,part:o}}moveShip(t,e,n,a){const r=this.layout[t][e].id,o=this.layout[t][e].orientation,i=this.ships[r].size,s=b(this.layout);if("horizontal"===o)for(let n=0;n<i;n++)s[t+n][e]="water";else if("vertical"===o)for(let n=0;n<i;n++)s[t][e+n]="water";try{S(s,i,n,a,o)}catch(t){return t}if("horizontal"===o)for(let n=0;n<i;n++)this.layout[t+n][e]="water";else if("vertical"===o)for(let n=0;n<i;n++)this.layout[t][e+n]="water";if("horizontal"===o)for(let t=0;t<i;t++)this.layout[n+t][a]={id:r,orientation:o,part:t};else if("vertical"===o)for(let t=0;t<i;t++)this.layout[n][a+t]={id:r,orientation:o,part:t}}rotateShip(t,e){const n=this.layout[t][e].id,a=this.layout[t][e].orientation,r=this.ships[n].size;let o;"horizontal"===a?o="vertical":"vertical"===a&&(o="horizontal");const i=b(this.layout);if("horizontal"===a)for(let n=0;n<r;n++)i[t+n][e]="water";else if("vertical"===a)for(let n=0;n<r;n++)i[t][e+n]="water";try{S(i,r,t,e,o)}catch(t){return t}if("horizontal"===a)for(let n=0;n<r;n++)this.layout[t+n][e]="water";else if("vertical"===a)for(let n=0;n<r;n++)this.layout[t][e+n]="water";if("horizontal"===o)for(let a=0;a<r;a++)this.layout[t+a][e]={id:n,orientation:"horizontal",part:a};else if("vertical"===o)for(let a=0;a<r;a++)this.layout[t][e+a]={id:n,orientation:"vertical",part:a}}receiveAttack(t,e){try{!function(t,e,n){if("hit"===n.record[t][e]||"miss"===n.record[t][e])throw"Repeated attack."}(t,e,this)}catch(t){return t}const n=this.layout[t][e];"water"===n?this.record[t][e]="miss":(this.ships[n.id].hit(n.part),this.record[t][e]="hit")}areAllShipsSunk(){return this.ships.every((function(t){return t.isSunk()}))}}const x=function(){return{x:Math.round(9*Math.random()),y:Math.round(9*Math.random())}},k=function(){const t=Math.round(Math.random());return 0===t?"vertical":1===t?"horizontal":void 0};class E{constructor(){this.gameboard=new w}makeRandomAttack(t){let{x:e,y:n}=x();for(;"Repeated attack."===t.gameboard.receiveAttack(e,n);)({x:e,y:n}=x())}placeShipAtRandom(t){let{x:e,y:n}=x(),a=k(),r=this.gameboard.placeShip(e,n,a,t);for(;"Ship overflows the gameboard."===r||"Ship overlaps with other ship."===r;)({x:e,y:n}=x()),a=k(),r=this.gameboard.placeShip(e,n,a,t)}placeAllShipsAtRandom(){this.placeShipAtRandom(5),this.placeShipAtRandom(4),this.placeShipAtRandom(3),this.placeShipAtRandom(3),this.placeShipAtRandom(2)}}const z=(()=>{const t=new E,e=new E;return{player1:t,computer1:e,placeShips:function(e){e.forEach((function(e){t.gameboard.placeShip(parseInt(e.x),parseInt(e.y),e.orientation,parseInt(e.size))}))},start:function(){e.placeAllShipsAtRandom()},doPcTurn:function(){e.makeRandomAttack(t)},doPlayerTurn:function(t,n){return"Repeated attack."!==e.gameboard.receiveAttack(t,n)},checkStatus:function(){return t.gameboard.areAllShipsSunk()?"pc wins":e.gameboard.areAllShipsSunk()?"player wins":void 0}}})(),A={playButton:document.querySelector("#play-button")},L=function(){const t=document.querySelector("main");for(;t.firstChild;)t.removeChild(t.lastChild)},C=(()=>{const t=document.createElement("button");return t.id="one-player-button",t.textContent="ONE PLAYER",{onePlayerButton:t,load:function(){L(),document.querySelector("main").appendChild(t)}}})(),R=function(t){const e=t.dataTransfer;e.dataEffect="move",e.setData("text/plain",t.target.id);const n=t.target.parentElement;n.className.includes("board-grid")&&(e.setData("isPlaced","true"),e.setData("xo",n.dataset.x),e.setData("yo",n.dataset.y))},T=function(t){t.preventDefault(),t.dataTransfer.dataEffect="move"},q=function(t,e){t.preventDefault();let n=t.target;if(n.className.includes("draggable-ship-part")){const e=n.parentElement;e.style.display="none",n=document.elementFromPoint(t.clientX,t.clientY),e.style.display="flex"}const a=t.dataTransfer,r=a.getData("text/plain"),o=document.querySelector(`#${r}`),i=parseInt(n.dataset.x),s=parseInt(n.dataset.y);if(a.getData("isPlaced")){const t=parseInt(a.getData("xo")),r=parseInt(a.getData("yo")),l=e.moveShip(t,r,i,s);"Ship overflows the gameboard."!==l&&"Ship overlaps with other ship."!==l&&n.appendChild(o)}else{const t=e.placeShip(i,s,o.dataset.orientation,o.dataset.size);"Ship overflows the gameboard."!==t&&"Ship overlaps with other ship."!==t&&n.appendChild(o)}return e},I=(()=>{const t=new w,e=(()=>{const e=document.createElement("div");e.classList.add("board-frame");const n=[];for(let t=0;t<10;t++){n.push([]);for(let e=0;e<10;e++)n[t].push(document.createElement("div")),n[t][e].classList.add("board-grid"),n[t][e].dataset.x=t,n[t][e].dataset.y=e}for(let a=0;a<10;a++)for(let r=0;r<10;r++)e.appendChild(n[r][a]),n[r][a].addEventListener("dragover",T),n[r][a].addEventListener("drop",(function(e){const n=q(e,t);t.layout=n.layout,t.ships=n.ships}));return{frame:e,grid:n}})(),n=function(e){const n=document.createElement("div");n.setAttribute("draggable","true"),n.classList.add("draggable-ship"),n.dataset.size=e,n.dataset.orientation="vertical";for(let t=0;t<e;t++){const e=document.createElement("div");e.classList.add("draggable-ship-part"),e.dataset.part=t,n.appendChild(e)}return n.addEventListener("dragstart",R),n.addEventListener("click",(function(e){const n=function(t,e){const n=t.target.parentElement;if("ships-container"===n.parentElement.id)return e;const a=n.dataset.orientation,r=n.parentElement,o=parseInt(r.dataset.x),i=parseInt(r.dataset.y),s=e.rotateShip(o,i);return"Ship overflows the gameboard."!==s&&"Ship overlaps with other ship."!==s&&("vertical"===a?n.dataset.orientation="horizontal":"horizontal"===a&&(n.dataset.orientation="vertical")),e}(e,t);t.layout=n.layout,t.ships=n.ships})),n},a=document.createElement("button");a.textContent="READY";const r=document.createElement("div");r.id="gameboard-container";const o=document.createElement("div");return o.id="ships-container",r.append(o,e.frame),{load:function(){L();const t=n(5);t.id="carrier";const e=n(4);e.id="battleship";const i=n(3);i.id="cruiser";const s=n(3);s.id="submarine";const l=n(2);l.id="destroyer",o.append(t,e,i,s,l),document.querySelector("main").append(r,a)},addReadyHandler:function(t){a.addEventListener("click",(function(){t(),a.remove()}))},getShips:function(){const t=[];for(let n=0;n<10;n++)for(let a=0;a<10;a++){const r=e.grid[n][a],o=r.firstChild;r.hasChildNodes()&&t.push({x:r.dataset.x,y:r.dataset.y,orientation:o.dataset.orientation,size:o.dataset.size})}return t}}})(),M=(()=>{const t=function(){const t=document.createElement("div");t.classList.add("board-frame");const e=[];for(let t=0;t<10;t++){e.push([]);for(let n=0;n<10;n++)e[t].push(document.createElement("div")),e[t][n].classList.add("board-grid"),e[t][n].dataset.x=t,e[t][n].dataset.y=n}for(let n=0;n<10;n++)for(let a=0;a<10;a++)t.appendChild(e[a][n]);return{frame:t,grid:e}},e=t(),n=t();return{load:function(){L();const t=document.createElement("div");t.id="gameboard-container",t.append(e.frame,n.frame),document.querySelector("main").appendChild(t)},addReadyHandler:function(t){readyButton.addEventListener("click",(function(){t(),readyButton.remove()}))},updateLayout:function(t){for(let n=0;n<10;n++)for(let a=0;a<10;a++){const r=t[n][a],o=e.grid[n][a];"hit"===r?o.classList.add("self-hit"):"miss"===r?o.classList.add("self-miss"):"water"!==r&&null!==r&&o.classList.add("ship")}},updateRecord:function(t){for(let e=0;e<10;e++)for(let a=0;a<10;a++){const r=t[e][a],o=n.grid[e][a];"hit"===r?o.classList.add("hit"):"miss"===r&&o.classList.add("miss")}},addRecordHandler:function(t){n.grid.forEach((e=>{e.forEach((e=>{e.addEventListener("click",(function(e){const n=e.target.dataset.x,a=e.target.dataset.y;t(n,a)}))}))}))},loadGameOverScreen:function(t){const e=document.createElement("div");e.id="blocking-screen";const n=document.createElement("div");n.id="game-over-sign",n.textContent=`GAME OVER: ${t} wins!`,e.appendChild(n),document.querySelector("main").appendChild(e)}}})();A.playButton.addEventListener("click",C.load),C.onePlayerButton.addEventListener("click",(function(){I.load(),I.addReadyHandler((function(){const t=I.getShips();z.placeShips(t),M.load(),z.start(),M.updateLayout(z.player1.gameboard.layout),M.addRecordHandler((function(t,e){z.doPlayerTurn(t,e)&&(M.updateRecord(z.computer1.gameboard.record),"player wins"===z.checkStatus()?M.loadGameOverScreen("player"):(z.doPcTurn(),M.updateLayout(z.player1.gameboard.record),"pc wins"===z.checkStatus()&&M.loadGameOverScreen("pc")))}))}))}))})()})();